---
name: retrospective
description: 专门用于在对话结束时，根据用户反馈和对话内容进行复盘与经验提炼的轻量能力。保留关键流程与处理方式，仅在对话中用 Markdown 输出，并询问是否需要沉淀。
version: 0.0.1
---

# Retrospective 复盘

这是一个轻量复盘能力，继承 Skill Evolution 的关键处理方式：复盘诊断、经验提取、缝合对齐。

默认仅输出本次会话复盘，不自动写入任何文件。

## 核心职责

1. **复盘诊断 (Session Review)**：在对话结束时，分析本次会话全流程中的目标、决策、问题与结果。
2. **经验提取 (Experience Extraction)**：从用户反馈与执行过程中提炼可复用经验（偏好、修复点、提示词策略等）。
3. **智能缝合 (Smart Stitching)**：将经验整理为可沉淀的 Markdown 条目，并在落盘前先征求用户确认。

## 使用场景

**Trigger**:
- `/retrospective`
- `/evolve`（兼容触发）
- "复盘一下刚才的对话"
- "把本次会话做个复盘"
- "总结这次会话的得失"

## 工作流 (Light Evolution Workflow)

### 1. 经验复盘 (Review)
当用户触发复盘时，Agent 必须执行：
1. **扫描上下文**：定位本次会话中的关键节点（需求澄清、方案选择、改动落地、结果反馈）。
2. **识别信号**：提取满意点与不满意点（报错、风格偏差、参数不合预期、沟通成本高等）。
3. **归因总结**：明确“为何有效 / 为何失效”，避免只记录现象。

### 2. 经验提取 (Extract)
将非结构化反馈转成 Markdown 经验条目，建议包含：
- 用户偏好（Preferences）
- 修复与规避（Fixes）
- 可复用提示（Prompts / Playbook）

### 3. 缝合建议 (Stitch Preview)
在对话内给出“可沉淀版本”的 Markdown 建议稿（不自动写文件），例如建议沉淀到：
- 指定 Skill 的 `SKILL.md`
- 相关 `references/*.md`

### 4. 询问是否沉淀 (Confirm)
复盘输出完成后，必须追加确认：
- “以上是本次会话复盘，是否需要我将这些经验沉淀到指定文档？”

> 未获得用户明确同意前，不执行任何写入沉淀动作。

## 输出格式

复盘只用 Markdown，建议结构：
- 背景与目标
- 过程回顾
- 做得好的点
- 可以改进的点
- 可沉淀经验草案
- 是否沉淀确认

## 最佳实践

- 先总结事实，再给判断，避免主观泛化。
- 重点记录“有效做法 + 可避免的问题”。
- 保留原版处理方式，但以轻量对话形态执行，不依赖脚本与 JSON。
